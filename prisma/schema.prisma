// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider     = "mysql"
  url          = env("DATABASE_URL")
  relationMode = "prisma"
}

generator client {
  provider = "prisma-client-js"
}

model user {
  id                 Int                    @id @default(autoincrement())
  email              String                 @unique
  name               String?
  activeDirectoryId  String                 @unique
  refreshToken       String?                @db.VarChar(2000)
  accessTokenExpires BigInt?
  hourlyRate         Int                    @default(1000)
  commission         Decimal                @default(0.40) @db.Decimal(5, 2)
  tax                Decimal                @default(0.35) @db.Decimal(5, 2)
  workHours          Decimal                @default(7.5) @db.Decimal(5, 2)
  created            DateTime               @default(now())
  updated            DateTime               @default(now())
  isAdmin            Boolean                @default(false)
  isSpecialist       Boolean                @default(false)
  workDayDetails     user_work_day_detail[]
  feedback           user_feedback[]
}

model user_work_day_detail {
  id                   Int     @id @default(autoincrement())
  date                 String
  nonCommissionedHours Decimal @default(0) @db.Decimal(5, 2)
  extraHours           Decimal @default(0) @db.Decimal(5, 2)
  sickDay              Boolean @default(false)
  user                 user    @relation(fields: [userId], references: [id])
  userId               Int

  @@unique([userId, date])
  @@index([userId])
}

model user_feedback {
  id       Int      @id @default(autoincrement())
  date     DateTime @default(now())
  user     user     @relation(fields: [userId], references: [id])
  userId   Int
  feedback String   @db.VarChar(2000)
  reaction Int

  @@index([userId])
}
